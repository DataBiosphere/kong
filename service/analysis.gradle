jacocoTestReport {
	reports {
		html.required = true
		xml.required = true
	}

	dependsOn test, testFunctional

	// https://www.baeldung.com/jacoco-report-exclude#2-gradle-configuration
	afterEvaluate {
		classDirectories.setFrom(files(classDirectories.files.collect {
			fileTree(dir: it, exclude: ['bio/terra/externalcreds/generated/**'])
		}))
	}
}

spotbugs {
	reportLevel = 'high'
	effort = 'max'
	reportsDir = file("${project.reporting.baseDir}/spotbugs")
	excludeFilter = file('../common/spotbugsExclude.xml')
}

spotbugsMain {
	reports {
		sarif { enabled = true }
		html { enabled = true }
	}
}

spotbugsTest { enabled = false }
